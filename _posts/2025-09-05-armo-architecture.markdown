# Armo에 적합한 웹 아키텍처 설계기

> 작품을 럭셔리하게 전시하고, 스토리텔링으로 굿즈와 연결하는 Armo 웹사이트의 기술적 기반

---

## 🎨 프로젝트 배경

Armo 웹사이트의 목적은 단순히 상품을 판매하는 것이 아니다.  
**작품을 럭셔리하게 전시하고, 그 스토리와 모티브를 굿즈로 확장**하는 경험을 전달하는 것이 핵심이다.

이를 위해 정보 구조(IA)와 사용자 경험은 다음과 같은 흐름을 따른다:

- 홈: 브랜드 슬로건 + 대표 작품 비주얼
- 작품 & 스토리: 작가 의도, 모티브, 인터뷰와 굿즈 연결
- 굿즈 & 패키지: 작품 기반 상품 세트 + 감각적인 포장
- 작가 소개 / 저널 / 고객센터: 브랜드 철학과 운영 지원

---

## 🧩 요구사항 핵심

- **고급스럽고 전문적인 웹 갤러리 스타일**
- **스토리텔링 중심 상품 가치 강화** (작품 스토리 + 굿즈 연결)
- **CMS 기반 콘텐츠 관리**: 작가/작품/굿즈를 쉽게 등록·편집
- **향후 확장성 고려**: 스토어, 클래스·워크숍, 플랫폼 허브

즉, 콘텐츠 중심 웹 갤러리지만 **커머스로 자연스럽게 확장 가능한 구조**가 필요하다.

---

## ⚙️ 아키텍처 설계 원칙

Armo 아키텍처의 핵심은 **벤더 종속을 최소화하면서도 빠른 구축과 확장성 확보**이다.

### 원칙
1. **Edge Function 종속 최소화** → 특정 벤더에 묶이지 않도록 설계
2. **표준 프로토콜/런타임 활용** → HTTP, Postgres, S3, Docker 기반
3. **지금은 가볍게, 나중엔 쉽게 확장** → 초기엔 단순 조합, 성장 시 클라우드 이관 용이

---

## 🏗️ 전체 아키텍처 개요

### 1. 프런트엔드
- **Next.js (App Router)**
- **Vercel Pro** 배포: CDN + ISR/SSG/SSR 혼합
- Admin UI도 동일 앱에 포함 (`/admin`)

### 2. 백엔드
- **Node.js + Fastify 컨테이너**
- **Fly.io**에 Docker 배포 (NestJS를 얹어 구조화 가능)
- 역할: 인증, 권한검증, 비즈니스 로직, 웹훅, 검색 인덱싱

### 3. 데이터 레이어
- **Supabase Pro** (Postgres + Storage + Auth)
- pg-boss (Postgres 기반 잡 큐) → 배치/재시도/예약
- Typesense → 검색 인덱싱/자동완성

### 4. 별도 서비스
- **QR Redirect Service** (Fastify 경량 앱)
- /q/[code] 형태의 단축 링크 → 전용 랜딩 페이지 연결
- 스캔 통계는 pg-boss 큐로 적재

---

## 🔄 요청 흐름

1. 사용자가 Armo 웹 접속 → Vercel CDN에서 정적/ISR 페이지 서빙
2. 데이터 필요 시 → 백엔드 API 호출 (Fly.io Fastify/NestJS)
3. API는 Supabase(Postgres/Storage), Typesense, pg-boss와 직접 연동
4. Admin에서 콘텐츠 편집 → DB 갱신 → 큐/워커 통해 검색 인덱스·PDF 생성 처리
5. QR 스캔 → Redirect 서비스 → 퍼머링크 랜딩 페이지 제공

---

## 💰 비용 추정

- Vercel Pro: $20/월
- Fly.io 컨테이너: $40~50/월
- Supabase Pro: $25/월
- Typesense 컨테이너: $20~30/월
- QR 서비스(경량 Fastify): $10/월

👉 합계: **$100 내외/월**에서 안정적 운영 가능.

트래픽·스토어 확장 시에도 $200~300 수준에서 감당 가능.

---

## 📈 확장 전략

- **스토어 기능**: 장바구니, 결제(Stripe/토스), 재고 관리 추가
- **클래스·워크숍**: 예약·결제·출석 QR 기능
- **플랫폼 허브 연동**: 새김/레모/아크보 등 외부 플랫폼과 SSO/Embed

벤더 종속을 최소화했기 때문에 AWS/GCP로의 이관도 무리 없이 진행할 수 있게 한다.

---

## ✨ 결론

Armo 아키텍처는 **Next.js + Vercel + Fly.io + Supabase + Typesense + pg-boss**라는 조합으로,
- **빠른 구축 속도**
- **브랜드 철학에 맞는 고급스러운 경험**
- **스토어 확장성과 벤더 독립성**

을 모두 충족한다.

작가의 작품을 럭셔리하게 전시하고, 스토리와 굿즈로 연결하는 Armo의 철학을 가장 잘 구현할 수 있는 기술적 토대라고 할 수 있다.

---